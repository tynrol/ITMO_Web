{"version":3,"sources":["constants/actionTypes.js","components/Header.js","components/App.js","middleware.js","reducers/common.js","store.js","reducers/auth.js","reducers/points.js","components/PointRow.js","components/PointsList.js","components/Home/MainView.js","components/ListErrors.js","components/Home/PointInput.js","components/Home/Graphic.js","components/Home/index.js","components/Login.js","components/Register.js","index.js","agent.js"],"names":["LOGIN","LoggedOutView","props","currentUser","className","to","LoggedInView","onClick","logout","Header","this","onClickLogout","React","Component","connect","dispatch","type","payload","agent","Auth","App","token","window","localStorage","getItem","username","setToken","onLoad","nextProps","redirectTo","context","router","replace","onRedirect","appName","children","contextTypes","PropTypes","object","isRequired","state","common","points","defaultState","reducers","combineReducers","auth","action","inProgress","errors","error","message","subtype","key","value","appLoaded","point","points_r","current_r","r","middleware","applyMiddleware","store","next","v","then","res","response","setItem","removeItem","Points","all","recalculated","createStore","PointRow","id","x","toFixed","y","result","PointsList","length","map","ListErrors","PointInput","changeX","ev","onChangeX","target","changeY","onChangeY","changeR","onChangeR","submitForm","preventDefault","onSubmit","xc","yc","rc","placeholder","onChange","new","Graphic","addPointFromCanvas","bind","recalculatedPoints","drawGraphic","width","height","ref","node","graphic","drawPoint","hit","getContext","beginPath","arc","Math","round","PI","closePath","strokeStyle","color","fillStyle","fill","stroke","br","getBoundingClientRect","left","top","event","clientX","clientY","console","log","xCalculated","yCalculated","onCanvasClick","clearRect","rect","moveTo","lineTo","font","fillText","Home","Login","changeUsername","onChangeUsername","changePassword","onChangePassword","password","disabled","login","Register","register","ReactDOM","render","history","browserHistory","path","component","document","getElementById","superagent","superagentPromise","_superagent","global","Promise","API_ROOT","responseBody","body","tokenPlugin","req","set","requests","url","get","use","post","_token"],"mappings":"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","file":"static/js/main.fce57327.chunk.js","sourcesContent":["export const APP_LOAD = 'APP_LOAD';\r\n\r\nexport const LOGIN = 'LOGIN';\r\nexport const REGISTER = 'REGISTER';\r\n\r\nexport const ASYNC_START = 'ASYNC_START';\r\nexport const UPDATE_FIELD_AUTH = 'UPDATE_FIELD_AUTH';\r\nexport const REDIRECT = 'REDIRECT';\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\nexport const UPDATE_FIELD_POINT = 'UPDATE_FIELD_POINT';\r\nexport const POINTS_LOADED = 'POINTS_LOADED';\r\nexport const POINTS_RECALCULATED = 'POINTS_RECALCULATED';\r\nexport const POINT_ADDED = 'POINT_ADDED';\r\n","import { Link } from 'react-router';\r\nimport React from 'react';\r\nimport agent from \"../agent\";\r\nimport {connect} from \"react-redux\";\r\nimport {LOGOUT} from \"../constants/actionTypes\";\r\n\r\nconst LoggedOutView = props => {\r\n    if (!props.currentUser) {\r\n        return (\r\n            <ul className=\"nav navbar-nav pull-xs-right\">\r\n\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"login\" className=\"nav-link\">\r\n                        Sign in\r\n                    </Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"register\" className=\"nav-link\">\r\n                        Sign up\r\n                    </Link>\r\n                </li>\r\n\r\n            </ul>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nconst LoggedInView = props => {\r\n    if (props.currentUser) {\r\n        return (\r\n            <ul className=\"nav navbar-nav pull-xs-right\">\r\n\r\n                <li className=\"nav-item\">\r\n                        {props.currentUser}\r\n                </li>\r\n\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"/\"  onClick={props.logout} className=\"nav-link\">\r\n                        LogOut\r\n                    </Link>\r\n                </li>\r\n\r\n            </ul>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onClickLogout: () => {\r\n        dispatch({ type: LOGOUT, payload: agent.Auth.logout() })\r\n    },\r\n});\r\n\r\nclass Header extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <nav className=\"navbar navbar-light bg-primary\">\r\n                <div className=\"container\">\r\n                    <Link to=\"/\" className=\"navbar-brand\">\r\n                        Tereshchenko & Shishkov\r\n                    </Link>\r\n\r\n                    <LoggedOutView currentUser={this.props.currentUser}/>\r\n\r\n                    <LoggedInView currentUser={this.props.currentUser}  logout={this.props.onClickLogout} />\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(Header);\r\n","import Header from './Header';\r\nimport React from 'react';\r\nimport agent from '../agent';\r\nimport { connect } from 'react-redux';\r\nimport {APP_LOAD, REDIRECT} from \"../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({\r\n    appName: state.common.appName,\r\n    currentUser: state.common.currentUser,\r\n    points: state.points.points,\r\n    redirectTo: state.common.redirectTo\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onLoad: (username, token) =>\r\n        dispatch({ type: APP_LOAD, username, token }),\r\n    onRedirect: () =>\r\n        dispatch({ type: REDIRECT })\r\n});\r\n\r\nclass App extends React.Component {\r\n    componentWillMount() {\r\n        const token = window.localStorage.getItem('token');\r\n        const username = window.localStorage.getItem('username');\r\n        if (token) {\r\n            agent.setToken(token);\r\n        }\r\n\r\n        this.props.onLoad(username, token);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.context.router.replace(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"welcome\">\r\n                <Header\r\n                    currentUser={this.props.currentUser}\r\n                    appName={this.props.appName} />\r\n\r\n                {this.props.children}\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nApp.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import agent from './agent';\r\nimport {\r\n    POINT_ADDED,\r\n    POINTS_LOADED,\r\n    LOGIN,\r\n    LOGOUT,\r\n    ASYNC_START, POINTS_RECALCULATED\r\n} from './constants/actionTypes';\r\n\r\nconst promiseMiddleware = store => next => action => {\r\n    if (isPromise(action.payload)) {\r\n        store.dispatch({ type: ASYNC_START, subtype: action.type });\r\n        action.payload.then(\r\n            res => {\r\n                action.payload = res;\r\n                store.dispatch(action);\r\n            },\r\n            error => {\r\n                action.error = true;\r\n                action.payload = error.response;\r\n                store.dispatch(action);\r\n            }\r\n        );\r\n\r\n        return;\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nfunction isPromise(v) {\r\n    return v && typeof v.then === 'function';\r\n}\r\n\r\nconst pointsMiddleware = store => next => action => {\r\n\r\n    switch (action.type) {\r\n        case POINTS_LOADED:\r\n            if (action.error) {\r\n                window.localStorage.removeItem('token');\r\n                window.localStorage.removeItem('username');\r\n                agent.setToken(null);\r\n            }\r\n            break;\r\n        case POINT_ADDED:\r\n            if (!action.error) {\r\n                store.dispatch({ type: POINTS_LOADED, payload: agent.Points.all() });\r\n                store.dispatch({ type: POINTS_RECALCULATED, payload: agent.Points.recalculated(action.r), r: action.r});\r\n            }\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\n\r\nconst authMiddleware = store => next => action => {\r\n\r\n    switch (action.type) {\r\n        case LOGIN:\r\n            if (!action.error) {\r\n\r\n                window.localStorage.setItem('token', action.payload.message);\r\n                window.localStorage.setItem('username', action.username);\r\n                agent.setToken(action.payload.message);\r\n            }\r\n            break;\r\n        case LOGOUT:\r\n            window.localStorage.removeItem('token');\r\n            window.localStorage.removeItem('username');\r\n            agent.setToken(null);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\n\r\nexport {\r\n    authMiddleware,\r\n    pointsMiddleware,\r\n    promiseMiddleware\r\n};\r\n","import {\r\n    LOGIN,\r\n    REGISTER,\r\n    LOGOUT,\r\n    REDIRECT,\r\n    APP_LOAD\r\n} from '../constants/actionTypes';\r\n\r\nconst defaultState = {\r\n    appName: 'Lab4-Web',\r\n    token: null\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case APP_LOAD:\r\n            return {\r\n                ...state,\r\n                token: action.token || null,\r\n                appLoaded: true,\r\n                currentUser: action.username || null\r\n            };\r\n        case REDIRECT:\r\n            return { ...state, redirectTo: null };\r\n        case LOGOUT:\r\n            return { ...state, redirectTo: '/', token: null, currentUser: null };\r\n        case LOGIN:\r\n            return {\r\n                ...state,\r\n                redirectTo: action.error ? null : '/',\r\n                currentUser: action.error ? null : action.username\r\n            };\r\n        case REGISTER:\r\n            return {\r\n                ...state,\r\n                redirectTo: action.error ? null : '/login'\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { applyMiddleware, createStore, combineReducers } from 'redux';\r\nimport {authMiddleware, pointsMiddleware, promiseMiddleware} from './middleware';\r\nimport auth from './reducers/auth';\r\nimport common from './reducers/common';\r\nimport points from './reducers/points';\r\n\r\n\r\nconst reducers = combineReducers({\r\n    auth,\r\n    common,\r\n    points\r\n});\r\n\r\nconst middleware = applyMiddleware(promiseMiddleware, authMiddleware, pointsMiddleware);\r\n\r\nconst store = createStore(reducers, middleware);\r\n\r\nexport default store;\r\n","import {\r\n    LOGIN,\r\n    REGISTER,\r\n    ASYNC_START,\r\n    UPDATE_FIELD_AUTH\r\n} from '../constants/actionTypes';\r\n\r\nexport default (state = {}, action) => {\r\n    switch (action.type) {\r\n        case LOGIN:\r\n        case REGISTER:\r\n            return {\r\n                ...state,\r\n                inProgress: false,\r\n                errors: action.error ? action.payload.message : null\r\n            };\r\n        case ASYNC_START:\r\n            if (action.subtype === LOGIN || action.subtype === REGISTER) {\r\n                return { ...state, inProgress: true };\r\n            }\r\n            return state;\r\n        case UPDATE_FIELD_AUTH:\r\n            return { ...state, [action.key]: action.value };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    POINT_ADDED,\r\n    POINTS_LOADED,\r\n    POINTS_RECALCULATED,\r\n    UPDATE_FIELD_POINT\r\n} from '../constants/actionTypes';\r\n\r\nexport default (state = {}, action) => {\r\n    switch (action.type) {\r\n        case UPDATE_FIELD_POINT:\r\n            return { ...state, [action.key]: action.value };\r\n        case POINT_ADDED:\r\n            return {\r\n                ...state,\r\n                point: action.payload\r\n            };\r\n        case POINTS_LOADED:\r\n            return {\r\n                ...state,\r\n                points: action.payload,\r\n            };\r\n        case POINTS_RECALCULATED:\r\n            return {\r\n                ...state,\r\n                points_r: action.payload,\r\n                current_r: action.r\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n","import React from 'react';\r\n\r\nconst PointRow = props => {\r\n    const point = props.point;\r\n\r\n    return (\r\n        <tbody>\r\n        <tr>\r\n            <td>{point.id}</td>\r\n            <td>{point.x.toFixed(3)}</td>\r\n            <td>{point.y.toFixed(3)}</td>\r\n            <td>{point.r}</td>\r\n            <td>{point.result ? 'true' : 'false'}</td>\r\n        </tr>\r\n        </tbody>\r\n    );\r\n};\r\n\r\nexport default PointRow;\r\n","import React from 'react';\r\nimport PointRow from \"./PointRow\";\r\n\r\nconst PointsList = props => {\r\n    if (props.currentUser) {\r\n        if (!props.points) {\r\n            return (\r\n                <div className=\"points\">Loading...</div>\r\n            );\r\n        }\r\n\r\n        if (props.points.length === 0) {\r\n            return (\r\n                <div className=\"points\">\r\n                    No points are here... yet.\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <table className=\"innerTable\">\r\n                    <tbody>\r\n                    <tr>\r\n                        <th>Id</th>\r\n                        <th>X</th>\r\n                        <th>Y</th>\r\n                        <th>R</th>\r\n                        <th>HIT</th>\r\n                    </tr>\r\n                    </tbody>\r\n\r\n                {\r\n                    props.points.map(point => {\r\n                        return (\r\n                            <PointRow point={point} key={point.id}/>\r\n                        );\r\n                    })\r\n                }\r\n                </table>\r\n            </div>\r\n\r\n        );\r\n    } else\r\n        return null;\r\n};\r\n\r\nexport default PointsList;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PointsList from \"../PointsList\";\r\nimport './main.css';\r\n\r\nconst mapStateToProps = state => ({\r\n    points: state.points.points,\r\n    currentUser: state.common.currentUser\r\n});\r\n\r\n\r\n\r\nconst MainView = props => {\r\n    return (\r\n        <div className=\"table\">\r\n            <PointsList\r\n                points={props.points} currentUser={props.currentUser}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, () => ({}))(MainView);\r\n","import React from 'react';\r\n\r\nclass ListErrors extends React.Component {\r\n    render() {\r\n        const errors = this.props.errors;\r\n        if (errors) {\r\n            return (\r\n                <ul className=\"error-messages\">\r\n                    <li key={errors}>\r\n                        {errors}\r\n                    </li>\r\n                </ul>\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default ListErrors;\r\n","import React from 'react';\r\nimport ListErrors from '../ListErrors';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport {POINT_ADDED, UPDATE_FIELD_POINT} from \"../../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({ ...state.points });\r\n\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onChangeX: value => {\r\n        if (value>=-5 && value<=3) dispatch({ type: UPDATE_FIELD_POINT, key: 'xc', value })},\r\n    onChangeY: value => {\r\n        if (value>=-3 && value<=3) dispatch({ type: UPDATE_FIELD_POINT, key: 'yc', value })},\r\n    onChangeR: value => {\r\n        if (value>=0 && value<=5) dispatch({ type: UPDATE_FIELD_POINT, key: 'rc', value })},\r\n    onSubmit: (x, y, r) => {\r\n        dispatch({ type: POINT_ADDED, payload: agent.Points.new(x, y, r), r})\r\n    }\r\n});\r\n\r\nclass PointInput extends React.Component {\r\n\r\n    changeX = ev => this.props.onChangeX(ev.target.value);\r\n\r\n    changeY = ev => this.props.onChangeY(ev.target.value);\r\n\r\n    changeR = ev => this.props.onChangeR(ev.target.value);\r\n\r\n    submitForm = (x, y, r) => ev => {\r\n        ev.preventDefault();\r\n        this.props.onSubmit(x, y, r);\r\n    };\r\n\r\n    render() {\r\n        const x = this.props.xc;\r\n        const y = this.props.yc;\r\n        const r = this.props.rc;\r\n\r\n        return (\r\n            <div className=\"auth-page\">\r\n                <div className=\"container page\">\r\n                    <div className=\"row\">\r\n\r\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n\r\n                            <ListErrors errors={this.props.errors} />\r\n\r\n                            <form onSubmit={this.submitForm(x, y, r)}>\r\n                                <fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"X [-5:3]\"\r\n                                            value={x}\r\n                                            onChange={this.changeX} />\r\n                                    </fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"Y [-3:3]\"\r\n                                            value={y}\r\n                                            onChange={this.changeY} />\r\n                                    </fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"R [0:5]\"\r\n                                            value={r}\r\n                                            onChange={this.changeR} />\r\n                                    </fieldset>\r\n\r\n                                    <button\r\n                                        className=\"btn btn-lg btn-primary pull-xs-right\"\r\n                                        type=\"submit\">\r\n                                        CHECK\r\n                                    </button>\r\n\r\n                                </fieldset>\r\n                            </form>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PointInput);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport agent from \"../../agent\";\r\nimport {POINT_ADDED, POINTS_RECALCULATED} from \"../../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({\r\n    points: state.points.points_r,\r\n    rc: state.points.rc,\r\n    current_r: state.points.current_r\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    recalculatedPoints: (r) => {\r\n        dispatch({ type: POINTS_RECALCULATED, payload: agent.Points.recalculated(r), r})\r\n    },\r\n    onCanvasClick: (x, y, r) => {\r\n        dispatch({ type: POINT_ADDED, payload: agent.Points.new(x, y, r), r})\r\n    }\r\n});\r\n\r\nclass Graphic extends React.Component {\r\n\r\n    addPointFromCanvas = this.addPointFromCanvas.bind(this);\r\n\r\n\r\n    componentWillMount() {\r\n        this.props.recalculatedPoints(1);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.drawGraphic(1);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"graphic\">\r\n                <canvas width=\"300\" height=\"300\" ref={node => this.graphic = node} onClick={this.addPointFromCanvas}>\r\n                </canvas>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        if (nextProps.rc) {\r\n            this.drawGraphic(nextProps.rc);\r\n            if (!nextProps.current_r || nextProps.current_r !== nextProps.rc)\r\n                this.props.recalculatedPoints(nextProps.rc);\r\n        }\r\n        if (nextProps.points) {\r\n            nextProps.points.map(point => this.drawPoint(point));\r\n        }\r\n    }\r\n\r\n    drawPoint(point) {\r\n\r\n        let x = point.x, y = point.y, hit = point.result;\r\n\r\n        let context = this.graphic.getContext(\"2d\");\r\n\r\n        context.beginPath();\r\n        context.arc(Math.round(150 + ((x / 5) * 130)) - 3, Math.round(150 - ((y / 5) * 130)) - 3,2,0,Math.PI*2)\r\n        // context.rect(Math.round(150 + ((x / 5) * 130)) - 3, Math.round(150 - ((y / 5) * 130)) - 3, 6, 6);\r\n        context.closePath();\r\n        context.strokeStyle = 'black';\r\n\r\n        let color = 'red';\r\n\r\n        if (hit) {\r\n            color = 'lime';\r\n        }\r\n\r\n        context.fillStyle = color;\r\n        context.fill();\r\n        context.stroke();\r\n\r\n    }\r\n\r\n    addPointFromCanvas(ev) {\r\n\r\n        let br = this.graphic.getBoundingClientRect();\r\n        let left = br.left;\r\n        let top = br.top;\r\n\r\n        let event = ev;\r\n        let x = event.clientX - left;\r\n        let y = event.clientY - top;\r\n        console.log(`x=${x} y=${y}`);\r\n\r\n        let xCalculated = (x - 150) / 130 * 5;\r\n        let yCalculated = (-y + 150) / 130 * 5;\r\n\r\n        this.props.onCanvasClick(xCalculated, yCalculated, this.props.rc || 1);\r\n\r\n    }\r\n\r\n    drawGraphic(r) {\r\n        console.log(\"Drawing graphic with R=\"+r);\r\n        let context = this.graphic.getContext(\"2d\");\r\n        context.clearRect(0, 0, this.graphic.width, this.graphic.height);\r\n\r\n        // rectangle\r\n        context.beginPath();\r\n        context.rect(150, 150, 130*(r/5), 130*(r/5));\r\n        context.closePath();\r\n        context.strokeStyle = \"#df8b1f\";\r\n        context.fillStyle = \"#df8b1f\";\r\n        context.fill();\r\n        context.stroke();\r\n\r\n        // sector\r\n        context.beginPath();\r\n        context.moveTo(150, 150);\r\n        context.arc(150, 150, 130*(r/5), 3*Math.PI/2, 2*Math.PI, false);\r\n        context.closePath();\r\n        context.strokeStyle = \"#df8b1f\";\r\n        context.fillStyle = \"#df8b1f\";\r\n        context.fill();\r\n        context.stroke();\r\n\r\n        // triangle\r\n        context.beginPath();\r\n        context.moveTo(150, 150);\r\n        context.lineTo(150-(130*(r/5)), 150);\r\n        context.lineTo(150, 150+(130*(r/5)));\r\n        context.lineTo(150, 150);\r\n        context.closePath();\r\n        context.strokeStyle = \"#df8b1f\";\r\n        context.fillStyle = \"#df8b1f\";\r\n        context.fill();\r\n        context.stroke();\r\n\r\n        // axes\r\n        context.beginPath();\r\n        context.font = \"10px Verdana\";\r\n        context.strokeStyle = \"black\";\r\n        context.fillStyle = \"black\";\r\n        context.moveTo(150, 0);\r\n        context.lineTo(150, 300);\r\n        context.moveTo(150, 0);\r\n        context.lineTo(145, 15);\r\n        context.moveTo(150, 0);\r\n        context.lineTo(155, 15);\r\n        context.fillText(\"Y\", 160, 10);\r\n        context.moveTo(0, 150);\r\n        context.lineTo(300, 150);\r\n        context.moveTo(300, 150);\r\n        context.lineTo(285, 145);\r\n        context.moveTo(300, 150);\r\n        context.lineTo(285, 155);\r\n        context.fillText(\"X\", 290, 130);\r\n\r\n        // Y parts\r\n        context.moveTo(145, 20);\r\n        context.lineTo(155, 20);\r\n        context.fillText(' 5', 160, 20);\r\n        context.moveTo(145, 46);\r\n        context.lineTo(155, 46);\r\n        context.fillText(' 4', 160, 46);\r\n        context.moveTo(145, 72);\r\n        context.lineTo(155, 72);\r\n        context.fillText(' 3', 160, 72);\r\n        context.moveTo(145, 98);\r\n        context.lineTo(155, 98);\r\n        context.fillText(' 2', 160, 98);\r\n        context.moveTo(145, 124);\r\n        context.lineTo(155, 124);\r\n        context.fillText(' 1', 160, 124);\r\n\r\n        context.moveTo(145, 176);\r\n        context.lineTo(155, 176);\r\n        context.fillText('-1', 160, 176);\r\n        context.moveTo(145, 202);\r\n        context.lineTo(155, 202);\r\n        context.fillText('-2', 160, 202);\r\n        context.moveTo(145, 228);\r\n        context.lineTo(155, 228);\r\n        context.fillText('-3', 160, 228);\r\n        context.moveTo(145, 254);\r\n        context.lineTo(155, 254);\r\n        context.fillText('-4', 160, 254);\r\n        context.moveTo(145, 280);\r\n        context.lineTo(155, 280);\r\n        context.fillText('-5', 160, 280);\r\n\r\n        // X parts\r\n        context.moveTo(20, 145);\r\n        context.lineTo(20, 155);\r\n        context.fillText('-5', 13, 140);\r\n        context.moveTo(46, 145);\r\n        context.lineTo(46, 155);\r\n        context.fillText('-4', 39, 140);\r\n        context.moveTo(72, 145);\r\n        context.lineTo(72, 155);\r\n        context.fillText('-3', 65, 140);\r\n        context.moveTo(98, 145);\r\n        context.lineTo(98, 155);\r\n        context.fillText('-2', 91, 140);\r\n        context.moveTo(124, 145);\r\n        context.lineTo(124, 155);\r\n        context.fillText('-1', 117, 140);\r\n\r\n        context.moveTo(176, 145);\r\n        context.lineTo(176, 155);\r\n        context.fillText(' 1', 169, 140);\r\n        context.moveTo(202, 145);\r\n        context.lineTo(202, 155);\r\n        context.fillText(' 2', 195, 140);\r\n        context.moveTo(228, 145);\r\n        context.lineTo(228, 155);\r\n        context.fillText(' 3', 221, 140);\r\n        context.moveTo(254, 145);\r\n        context.lineTo(254, 155);\r\n        context.fillText(' 4', 247, 140);\r\n        context.moveTo(280, 145);\r\n        context.lineTo(280, 155);\r\n        context.fillText(' 5', 273, 140);\r\n\r\n        context.closePath();\r\n        context.strokeStyle = \"black\";\r\n        context.fillStyle = \"black\";\r\n        context.stroke();\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Graphic);\r\n","import MainView from './MainView';\r\nimport React from 'react';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport PointInput from \"./PointInput\";\r\nimport Graphic from \"./Graphic\";\r\nimport { POINTS_LOADED } from \"../../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({\r\n    appName: state.common.appName,\r\n    currentUser: state.common.currentUser,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onLoad: (payload) =>\r\n        dispatch({ type: POINTS_LOADED, payload }),\r\n});\r\n\r\nclass Home extends React.Component {\r\n\r\n\r\n    componentWillMount() {\r\n        if (this.props.currentUser)\r\n            this.props.onLoad(agent.Points.all());\r\n    }\r\n\r\n    render() {\r\n        if (this.props.currentUser) {\r\n            return (\r\n                <div className=\"home-page\">\r\n\r\n                    <Graphic/>\r\n                    <PointInput/>\r\n\r\n                    <div className=\"container-page\">\r\n                        <MainView/>\r\n                    </div>\r\n                    <div className=\"footer\" >\r\n                        End.\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            );\r\n        } else\r\n            return null;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import { Link } from 'react-router';\r\nimport ListErrors from './ListErrors';\r\nimport React from 'react';\r\nimport agent from '../agent';\r\nimport { connect } from 'react-redux';\r\nimport {LOGIN, UPDATE_FIELD_AUTH} from \"../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({ ...state.auth });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onChangeUsername: value =>\r\n        dispatch({ type: UPDATE_FIELD_AUTH, key: 'username', value }),\r\n    onChangePassword: value =>\r\n        dispatch({ type: UPDATE_FIELD_AUTH, key: 'password', value }),\r\n    onSubmit: (username, password) =>\r\n        dispatch({ type: LOGIN, payload: agent.Auth.login(username, password), username })\r\n});\r\n\r\nclass Login extends React.Component {\r\n\r\n    changeUsername = ev => this.props.onChangeUsername(ev.target.value);\r\n\r\n    changePassword = ev => this.props.onChangePassword(ev.target.value);\r\n\r\n    submitForm = (username, password) => ev => {\r\n        ev.preventDefault();\r\n        this.props.onSubmit(username, password);\r\n    };\r\n\r\n    render() {\r\n        const username = this.props.username;\r\n        const password = this.props.password;\r\n        return (\r\n            <div className=\"auth-page\">\r\n                <div className=\"container page\">\r\n                    <div className=\"row\">\r\n\r\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n                            <h1 className=\"text-xs-center\">Sign In</h1>\r\n                            <p className=\"text-xs-center\">\r\n                                <Link to=\"register\">\r\n                                    Need an account?\r\n                                </Link>\r\n                            </p>\r\n\r\n                            <ListErrors errors={this.props.errors} />\r\n\r\n                            <form onSubmit={this.submitForm(username, password)}>\r\n                                <fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"email\"\r\n                                            placeholder=\"Username\"\r\n                                            value={username}\r\n                                            onChange={this.changeUsername} />\r\n                                    </fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"password\"\r\n                                            placeholder=\"Password\"\r\n                                            value={password}\r\n                                            onChange={this.changePassword} />\r\n                                    </fieldset>\r\n\r\n                                    <button\r\n                                        className=\"btn btn-lg btn-primary pull-xs-right\"\r\n                                        type=\"submit\"\r\n                                        disabled={this.props.inProgress}>\r\n                                        Sign in\r\n                                    </button>\r\n\r\n                                </fieldset>\r\n                            </form>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import { Link } from 'react-router';\r\nimport ListErrors from './ListErrors';\r\nimport React from 'react';\r\nimport agent from '../agent';\r\nimport { connect } from 'react-redux';\r\nimport {REGISTER, UPDATE_FIELD_AUTH} from \"../constants/actionTypes\";\r\n\r\nconst mapStateToProps = state => ({ ...state.auth });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    onChangePassword: value =>\r\n        dispatch({ type: UPDATE_FIELD_AUTH, key: 'password', value }),\r\n    onChangeUsername: value =>\r\n        dispatch({ type: UPDATE_FIELD_AUTH, key: 'username', value }),\r\n    onSubmit: (username, password) => {\r\n        const payload = agent.Auth.register(username, password);\r\n        dispatch({ type: REGISTER, payload })\r\n    }\r\n});\r\n\r\nclass Register extends React.Component {\r\n\r\n    changePassword = ev => this.props.onChangePassword(ev.target.value);\r\n\r\n    changeUsername = ev => this.props.onChangeUsername(ev.target.value);\r\n\r\n    submitForm = (username, password) => ev => {\r\n        ev.preventDefault();\r\n        this.props.onSubmit(username, password);\r\n    };\r\n\r\n    render() {\r\n        const password = this.props.password;\r\n        const username = this.props.username;\r\n\r\n        return (\r\n            <div className=\"auth-page\">\r\n                <div className=\"container page\">\r\n                    <div className=\"row\">\r\n\r\n                        <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n                            <h1 className=\"text-xs-center\">Sign Up</h1>\r\n                            <p className=\"text-xs-center\">\r\n                                <Link to=\"login\">\r\n                                    Have an account?\r\n                                </Link>\r\n                            </p>\r\n\r\n                            <ListErrors errors={this.props.errors} />\r\n\r\n                            <form onSubmit={this.submitForm(username, password)}>\r\n                                <fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"email\"\r\n                                            placeholder=\"Username\"\r\n                                            value={this.props.username}\r\n                                            onChange={this.changeUsername} />\r\n                                    </fieldset>\r\n\r\n                                    <fieldset className=\"form-group\">\r\n                                        <input\r\n                                            className=\"form-control form-control-lg\"\r\n                                            type=\"password\"\r\n                                            placeholder=\"Password\"\r\n                                            value={this.props.password}\r\n                                            onChange={this.changePassword} />\r\n                                    </fieldset>\r\n\r\n                                    <button\r\n                                        className=\"btn btn-lg btn-primary pull-xs-right\"\r\n                                        type=\"submit\"\r\n                                        disabled={this.props.inProgress}>\r\n                                        Sign up\r\n                                    </button>\r\n\r\n                                </fieldset>\r\n                            </form>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);\r\n","import App from './components/App';\r\nimport { Provider } from 'react-redux';\r\nimport ReactDOM from 'react-dom';\r\nimport React from 'react';\r\nimport store from \"./store\";\r\nimport {Router, Route, IndexRoute, browserHistory} from 'react-router';\r\nimport Home from './components/Home';\r\nimport Login from './components/Login';\r\nimport Register from \"./components/Register\";\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\n\r\nReactDOM.render((\r\n    <Provider store={store}>\r\n        <Router history={browserHistory}>\r\n            <Route path=\"/\" component={App}>\r\n                <IndexRoute component={Home}/>\r\n                <Route path=\"login\" component={Login} />\r\n                <Route path=\"register\" component={Register} />\r\n            </Route>\r\n        </Router>\r\n    </Provider>\r\n), document.getElementById('root'));\r\n","import superagentPromise from 'superagent-promise';\r\nimport _superagent from 'superagent';\r\n\r\nconst superagent = superagentPromise(_superagent, global.Promise);\r\n\r\nconst API_ROOT = 'http://localhost:28228/api';\r\n\r\nconst responseBody = res => res.body;\r\n\r\nlet token = null;\r\nconst tokenPlugin = req => {\r\n    if (token) {\r\n        req.set('Authorization', `Basic ${token}`);\r\n    }\r\n};\r\n\r\nconst requests = {\r\n    get: url =>\r\n        superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\r\n    post: (url, body) =>\r\n        superagent.post(`${API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody),\r\n};\r\n\r\nconst Points = {\r\n    all: () =>\r\n        requests.get('/points'),\r\n    recalculated: (r) =>\r\n        requests.get(`/points/recalculate?r=${r}`),\r\n    new: (x, y, r) =>\r\n        requests.post('/points', {x: x, y: y, r: r})\r\n};\r\n\r\nconst Auth = {\r\n    login: (username, password) =>\r\n        requests.post('/users/login', { username: username, password: password }),\r\n    register: (username, password) =>\r\n        requests.post('/users/register', { username: username, password: password } ),\r\n    logout: () =>\r\n        requests.post('/users/logout'),\r\n};\r\n\r\nexport default {\r\n    Points,\r\n    Auth,\r\n    setToken: _token => { token = _token; }\r\n};\r\n"],"sourceRoot":""}